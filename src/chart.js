
function getData(countingFunction, clearText, encryptedTextA) {
    let sampleClearText = `charlesisrightthethreatstotheeastaregrowingbythedayinthesouthernregiontheottomansarerestlessandinthenorththethreeemperorsareagrowingthreattoourinfluencetheforeignofficeseemparalysedfocussedentirelyonformingalliancesandunabletodeterminetheirbeststrategyithinktheyaremistakenintheiroutlooktheyfocustoomuchontreatiesandnotenoughonrealpolitikasvonrochauwrotethelawofpowergovernstheworldofstatesjustasthelawofgravitygovernsthephysicalworldandweareperhapstoomuchinclinedtooverlooktherealmightofthemorepowerfulandtheinevitabilityofitspoliticalinfluenceourtasknowisnottochooseafavouredpartnertocontroltheothersthatwayriskswaranalliancewillencourageacounterallianceandadangerousescalationinsteadourstrategyshouldbetomaintainanadmittedlyuneasypeacebetweentheemperorstogethertheyarethebiggestpoliticalthreattoourempirebutasenemiesofoneanothertheyalsothreatenourtradingroutesweneedtoinducethemtoworktogetherwhilepreventingthemfromformingapowerblocagainstourinterestourmostimportantweaponinthisisconfusionandmilddistrustthebestoutcomewouldbetoencourageadysfunctionalalliancebetweenallthreethatmakesithardfortheemperorstofightoneanotherorusandintheottomancrisisithinkisenseanopportunitytodojustthat`;
    sampleClearText += `the clue was in the name. the black museum is world famous as the in-house museum of crime at new scotland yard. the history books (or at least, wikipedia) told me that it had been set up by inspector neame and pc randall some time after april 1875 as a way to use the prisoners’ property store to instruct new recruits in the art of detection. the name first appears in public in an article in the observer newspaper in 1877, and the historians say it was coined as a grisly headline by a journalist who was snubbed by neame, but i am not so sure. it didn’t seem an accident that douglas black was looking to set up a top secret archive in london at that time, and scotland yard gave him the perfect location. it was central and easy to access. it had several entrances, with a steady flow of visitors, not all of them entirely reputable, that would disguise the comings and goings of the agents and officers of black’s network. best of all it had the entire metropolitan police force standing guard, which was great for black, and tough on me. it would be the ideal location for the shadow archive. scotland yard had moved to new premises several times since it was first set up, but i was betting that the shadow archive had moved with it, and i spent the best part of three weeks scouting the norman shaw buildings and the new “new scotland yard” next door at the curtis green building. it is not easy to do that without being spotted, hence the night time reconnaissance in the rain. the water and the cold played havoc with my mood, but also with many detector systems so it was worth the discomfort. no-one was likely to give me the real plans of the place, though harry was happy to provide me with a copy of the official layout, and i used a lidar system to map as much of the outside as i could. comparing the two should have revealed unmarked storage areas and given me some idea how i might get in, but nothing showed up until i had a lucky break. literally. i had lowered the lidar detector down a shaft on the curtis green roof, hoping to get a glimpse into some of the nearby rooms. it had just about reached ground level when the nylon line snapped. it made a hell of a row as it clattered down, and i prepared to run, but no alarms went off and, more importantly, i noticed something significant. it had taken around five seconds for the lidar to crash down, which, at a rough estimate, meant it had fallen free for around one hundred and twenty metres. that would have taken it a long way underground, and there were no basement rooms marked on the plans in that location. i was pretty sure i had found the shadow archive: now i just had to find a way in`;
    sampleClearText += `iamst illno tsure which ofthe twoca meupw ithth eidea ofthe under groun darch iveit willh aveap peale dtobl ackas awayt oprov idese curit ytohi soper ation butac ivile ngine ering proje ctoft hissc aledo esnts eemli kehis sorto fthin gsoit hinki tmust haveb eenco nceiv edbyc harle sgrey thefi rsttu belin ehadb eenop enedi nandl ondon wasfu llofl abour ersan dengi neers witht heski llsne ededt obuil dthes hadow archi vedee pbene athne wscot landy ardge tting acces swasn otgoi ngtob eeasy witho uthar ryshe lpbut istil ldidn thave enoug htogi vehim theex cuseh ewoul dneed toget openl yinvo lvedm yreco nnais sance hadhe lpedm etofi ndthe archi vebut itdid ntgiv emean yobvi ouswa yinth educt thath adcos tmeth elida rwasf artoo narro wform etosc alean dacce ssthr ought hefro ntdoo rwast ooris kysoi tooka gambl eands penta nothe rmise rable fortn ighte xplor ingth elaby rinth ofsew ersan dtunn elsys temsa round thene ighbo urhoo dgpsw asuse lessd ownth erean dicou ldeas ilyha vegot lostb utima rkedt hetun nelsa ndono ccasi onsus edthe seust ricko fabal loftw ineto helpm enavi gateb ackim ovedq uietl yandk eptan eyeou tfors ensor sihad noide awhet herth eshad owarc hivew assti llope ratio nalor notbu tifit wasth ensec urity would betig htand icoul dntbe surei fthey wereu singi nfrar edors eismo meter sfori ntrus ionde tecti onsoi layer edupw ithin sulat ionan dmove dslow lyitw ashor rible iwash otdam pandt heair smell edofs ewage andmo uldiw asjus tabou ttogi veupw henif ounda steel doorm arked witht heini tials vrivi ctori aregi naimp eratr ixitw asinc ongru ousin thatd arkan ddank tunne lbutm oresi gnifi cantl yitca rried thetr adema rktan nonth elock johnt annwa soneo fthet opsaf emake rsinv ictor ianlo ndona ndiha dcrac kedon eortw oofhi ssafe sinmy other lifea sacat burgl arthi swasb igand heavy andve ryrus tytha ttold metwo thing snoon ehadu sedit inave rylon gtime andno oneha dupgr adedi tinju stasl ongif thero ombeh indit wasst illin useth ensom eonew ouldh avebe enmai ntain ingth elock soall mypre cauti onswe repro bably unnec essar ybutn ooneh adpai dfora tanns afewi thout somet hingi mport antto hides oidec idedt otack lethe locka ndaft erano there ighte enhou rsofg rimwo rkiwa sinih adfou ndthe shado warch ive`;
    sampleClearText += `the april uprising in bulgaria and its brutal suppression by the turks has caused outrage in the chancelleries of europe there is a risk that russia will take this as the excuse it seeks to engage the ottomans and if they act and take constantinople then our trading routes to india will be under threatat home gladstones pamphlet bulgarian horrors and the question of the east has stirred a public appetite for action which could lead to support for intervention and make things difficult for the prime minister he is faced with mortons fork if he supports action then it will be difficult to condemn russian interference if he counsels inaction then he risk appearing weak and callous at home and abroad it may appear unfortunate that our political leaders are unable to agree on policy strategy or tactics and it is true that this could lead to confusion about our aims but on reflection i think that the public disagreement between gladstone and disraeli presents an opportunity their dispute conducted in parliament and the press demonstrates to the world the two faces of the empire at the same time morally engaged and yet prudent this may allow us to proceed with discretion to try to influence the actors and to direct the play away from the glare of the footlights it may be possible to engage the league of the three emperors to our causebismarck is particularly keen to maintain a balance of power in the region and to avoid further war and he will not need to be convinced that an unbridled russia is not to his advantage so i think we can rely on him to rein in russias expansionary visionon the other hand the league itself may present a longer term threat to the empire given the breadth of its influence in northern europe and we must tread carefullythe emperors envoys will be meeting in reichstadt soon to determine the response to the crisis and i need a plan to influence the outcome as always our strategy must be to sow confusion and on this i plan to ask for advice from baron playfair he has recently concluded his commission of enquiry into the civil service and if anyone knows how to control an agenda it must be our own civil servants`;
    sampleClearText += `itwasdarkanddustyintheshadowarchivebutatleastihadfoundittheshelvesmarchedoffintothegloomandmostofthemwereemptythoughtherewastheoccasionalboxofpapersmarkedsawhichhadclearlybeenforgotteninthemovetheywouldbeinterestingtoreadlaterbutnothinginthemlookedimportantenoughtohaveexcitedmycoconspiratorwhoeverthatmightbeitwouldhavebeeneasytogetdiscouragedbutineededtorecoverthelidarsoicarriedonsearchingforthechimneyieventuallyfounditatthebackofthestacksbuttherewasnosignofthelidarorofanydisturbancetosuggestithadfallenthatfarsoiguesseditmighthavegotcaughtonaledgehigherupfortunatelythechimneywasfairlywidebutnotsowidethaticouldntbridgeitandallthosehoursontheclimbingwallpaidoffasiclimbeduplookingforthelostmachineasisuspectedithadcaughtononeoftheledgesdesignedtocatchrainsoimadereadytoloweritbackdownbutasimovedloosebrickstosteadymyselfpartoftheinnerwallcollapsedandtomyamazementifoundmyselfstaringintoacontrolroomitwasveryjulesverneandwouldnthavelookedoutofplaceonthebridgeofthenautilusitmusthavebeencuttingedgetechnologyonceallbrassandpolishedinstrumentstherewasamaponthewallcoveredinsmallbulbsthatiassumedwouldhavelituptosignifyactivityandabankoffinenineteenthcenturytelegraphmachinesinpolishedwalnutunlessiwasmistakenihadfounddouglasblackscommandcentreunderalargecircularoaktableinthecentreoftheroomtherewasafilingsystemwithdrawerscontainingmapsofeverynationandthetablecouldbeturnedlikearestaurantlazysusanthewallswerelinedwithbrassboundledgersandfoldersmarkedwithwhatlookedlikemissioncodenamesinamongstthemwasthemostamazingfindblackscodebookitcontainedanumberofkeysandbestofallalistofciphersandwhenandhowtheyshouldbeuseditwouldbeworthafortuneonthebibliophileblackmarketbutididntfeellikesellingitharrymightbeinterestedifonlyforhistoricalreasonsbutifnotthenthiswouldfindahomeinmyownprivatecollectionitookaseatbythetelegraphandputmyfeetupopeningthecodebookatrandomtoreadaswiththethreeemperorsoperationitmaybenecessarytoenhanceoperationalsecurityduringtheoperationitselfinthatcasewemovedfrompurelylettersubstitutioncryptogramstotranspositionciphersandattheurgingofbaronplayfairothermorecomplicatedcipherslikethevigenereandplayfairciphersandvariantsuponthemiwascompletelyimmersedinwhatiwasreadingandthenithitme`;
    
    let twentySecondNovemberStringToTranslateA = `EODNJ XPMTD JBHMT BTDGT UJYEU MDIZJ IKHEA KJAPJ TEJUY EUNDY EDHBK ZGJTE PTDGX BZSSB ZEURP BKMUX XEONK IEJTE CKZUJ MDIDC HBREI IUBZD XTUJV KIJJT EHUST JDYBK ZJBRR BHNEJ BWZBN WYEBK JCHBA DAXPZ BCEHY DZEZJ GDYDS EJTEH BBYTD GAEEZ EOCEH JXPGU IDIIE YAXEG JTEIT EXLEI MEHEE YCJUE GBRAX DNWIY UIIUB ZRUXE IDZGY KNTBR JTEIJ EDYCK ZWJEN TZBXB SPTDG AEEZJ DWEZD CDHJC HEIKY DAXPJ BYDWE IKHEU JGUGZ JNBZJ DUZDZ PRKHJ TEHIE NHEJI JTEAU SAEDK JURKX HBKZG JDAXE TDGAE EZNXE DHEGD ZGUXE DZJBZ UJJBI JEDGP YPIEX RDIYP TEDGI MDYUS KEIIE GJTDJ MTBEL EHTDG RBXXB MEGYE UZJBJ TEJKZ ZEXID ZGBZU ZJBJT ETEDG FKDHJ EHIYK IJTDL EWZBM ZMTDJ UMDIX BBWUZ SRBHU JMDIJ BBYKN TBRDN BUZNU GEZNE JTDJJ TEPTD GRBKZ GYETE HECHB ADAXP JTEPM EHENB ZZENJ EGMUJ TJTEE YDUXI JTDJR UHIJS BJYEU ZJEHE IJEGU ZAXDN WAKJU ZDNBZ RKIEG IJDJE DRJEH YPAXD NWBKJ UMDIC KQQXE GMTPT DGJTE PUZLB XLEGY ECEHT DCIJT EPVKI JGUGZ JWZBM TBMJB RUZGJ TEITD GBMDH NTULE DZGTB CEGUM BKXGA EDAXE JBTEX CCEHT DCIJT EPMDZ JEGJB UYCXU NDJEY EUZJT EJTER JBRJT EITDG BMDHN TULEC DCEHI UZJTD JNDIE JTEPI TBKXG TDLET UJYET DHGEH UMDIZ JSBUZ SJBTD ZSDHB KZGXB ZSEZB KSTJB SEJND KSTJI BYEJT UZSMD IZDSS UZSDJ YEZBZ EBRJT ECDCE HIUTD GIEEZ XBBWE GUZJE HEIJU ZSEZB KSTJB VKIJU RPDXX JTUIE RRBHJ UJKHZ EGYPT EDGND KJUBK IXPJH PUZSJ BUSZB HEJTE JTHBA AUZSA ETUZG YPEDH DZGXB BWEGD HBKZG JTEHB BYBZE YBHEJ UYEJB IEEMT DJMEM EHEYU IIUZS DIUGU GIBYP RBBJN DKSTJ BZIBY EJTUZ SDZGU AEZJG BMZJB CUNWU JKCMT EZJTE PTUJY EUTDG AEEZI UJJUZ SHEDG UZSAX DNWIN BGEAB BWUJM DIRKX XBRYD HLEXX BKIUR GDJEG UGEDI BZNHP CJBSH DCTPD ZGUZR BHYDJ UBZIE NKHUJ PDZGU TDGVK IJAEE ZHEDG UZSJT EIENJ UBZBZ JHDZI CBIUJ UBZNU CTEHI UJIEE YEGTE MDICD HJUNK XDHXP WEEZB ZNBXK YZDHJ HDZIC BIUJU BZIDZ GMDID HSKUZ SJTDJ UJMBK XGAEA EIJJB HEDGB RRJTE NUCTE HJEOJ NBXKY ZAPNB XKYZJ BNBZR KIEEZ EYPNH PCJDZ DXPIJ IUMDI YKIUZ SBZVK IJTBM IENKH EJTDJ MBKXG AEMTE ZJTEM BHXGM EZJGD HWXKN WUXPD IUTDG RDXXE ZUTDG GHBCC EGJTE ABBWD ZGUJT DGIXU CCEGK ZGEHJ TEJDA XEIBY ETBMJ TEPTD GYUII EGUJG KHUZS JTEIE DHNTD ZGJTE HEUJM DITUG GEZUZ JTEIT DGBMI UJBBW DGEEC AHEDJ TJBIX BMJTE ICUZZ UZSAE TUZGY PEPEI DZGCU NWEGJ TEABB WKCAK JDIUC KXXEG YPIEX RKCHU STJDS DUZJT EJDAX EJBCI TURJE GIXUS TJXPJ BBZEI UGEUI JHKSS XEGJB HESDU ZYPAD XDZNE DZGJT EJDAX EYBLE GDSDU ZDZGJ TUIJU YEUTE DHGDG UIJUZ NJNXU NWDIU ITURJ EGYPM EUSTJ JTEJD AXEHB JDJEG ADNWD ZGJTE HEUJM DIBZN EYBHE DIBRJ YEJDX XUNNX UZWDI DHDJN TEJJB BJTEZ SDSEG UIJBB GKCSH DAAEG DJJTE JDAXE DZGCK XXEGI UGEMD PIUJJ KHZEG DSDUZ NXUNW UZSIE LEHDX JUYEI DIUJG UGIBU JMDID ZBUIE UWZEM LEHPM EXXJT EJKYA XEHIB ZDIDR EYDGE JTEID YEIBK ZGJTB KSTYK NTYKN TFKUE JEH`;

    function singleFreqAnalyser(stringToAnalyse) {
        let counts = {};
    
        for (var x = 0; x < stringToAnalyse.length; x++) {
            var c = stringToAnalyse.charAt(x);
            c = c.toUpperCase();
    
            if (counts[c] !== undefined) {
                counts[c]++;
            } else {
                counts[c] = 1;
            }
        }
    
        return counts;
    }

    let encWithNoSpaces = twentySecondNovemberStringToTranslateA.replace(/ /g, "");
    let clearWithNoSpaces = sampleClearText.toUpperCase().replace(/ /g, "");
    clearWithNoSpaces = clearWithNoSpaces.replace(/[0-9]/g, "");
    clearWithNoSpaces = clearWithNoSpaces.replace(/[\(\)\.\,\’\-\:“”]/g, "");
    let countsClear = singleFreqAnalyser(clearWithNoSpaces);
    let countsEnc = singleFreqAnalyser(encWithNoSpaces);

    var clearTupleArray = [];
    for (var key in countsClear) clearTupleArray.push(countsClear[key]);
    var encTupleArray = [];
    for (var key in countsEnc) encTupleArray.push(countsEnc[key]);


    clearTupleArray.sort(function (a, b) {
        return a-b
    });
    
    encTupleArray.sort(function (a, b) {
        return a-b
    });

    let arrayOfData = [];
    for (let c=0; c < 26; c++) {
        arrayOfData.push([c, 100*encTupleArray[c]/encWithNoSpaces.length, 100*clearTupleArray[c]/clearWithNoSpaces.length]);
    }
    return arrayOfData;
}

function drawMultSeries() {
    var data = new google.visualization.DataTable();

    data.addColumn('number', 'Letter');
    data.addColumn('number', 'Cipher');
    data.addColumn('number', 'Standard');

    data.addRows(getData());

    var options = {
        title: 'Comparison',
        chartArea: {width: '50%'},
        hAxis: {
            title: 'Frequency',
            minValue: 0
        },
        vAxis: {
            title: 'Letter'
        }
    };

    var chart = new google.charts.Bar(document.getElementById('chart_div'));
    chart.draw(data, options);
}
  
module.exports = {
    getCharter: function() {
        return drawMultSeries;
    },
    getPreppedData: function() {
        return getData;
    }
}